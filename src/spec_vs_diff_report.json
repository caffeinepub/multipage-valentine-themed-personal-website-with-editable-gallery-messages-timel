{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-15T12:46:33.498Z",
  "summary": "Frontend changes add a new Go Live guidance card on the Edit page and enhance publish controls with a version-specific live/not-published indicator and share-URL building. Backend changes introduce a per-version publish data map and a migration module, but the diff summary is truncated around the publish workflow, and the migration shown does not appear to preserve existing publish timestamps, which may impact REQ-7 acceptance criteria.",
  "missing_requirements": [
    {
      "id": "REQ-7",
      "requirement": "Existing publish workflow continues to work for current users; preserve existing publish-status stable state across upgrades (at least mapping previous global publish timestamps into an appropriate version entry).",
      "reason": "A migration file was added, but it initializes `versionPublishData` as empty and does not copy `lastPublishedTime` / `draftLastUpdatedTime` from the old stable fields into the new per-version structure. This risks losing existing publish-status information after upgrade, potentially breaking continuity for current users.",
      "evidence": [
        "backend/migration.mo"
      ]
    }
  ],
  "hallucinated_features": [
    {
      "description": "Aggressive TanStack Query invalidation/refetch logic on version switch for multiple version-scoped keys.",
      "reason": "REQ-5/6/7 do not request query invalidation/refetch orchestration in the version switcher; this is additional behavior beyond the specified requirements.",
      "evidence": [
        "frontend/src/components/ContentVersionSwitcher.tsx"
      ]
    }
  ],
  "confidence": 0.64,
  "changed_files": [
    "backend/main.mo",
    "backend/migration.mo",
    "frontend-file-summaries.txt",
    "frontend/src/components/ContentVersionSwitcher.tsx",
    "frontend/src/components/GoLiveGuidance.tsx",
    "frontend/src/components/PublishControls.tsx",
    "frontend/src/hooks/useQueries.ts",
    "frontend/src/pages/EditContentPage.tsx",
    "frontend/src/utils/urlParams.ts",
    "project_state.json"
  ]
}